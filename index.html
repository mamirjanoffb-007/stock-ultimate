<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>üè¨ Stockslight Ultimate</title>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js" onload="window.xlsxLoaded=true" onerror="window.xlsxLoaded=false"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" onload="window.chartLoaded=true" onerror="window.chartLoaded=false"></script>
    <body>
    <header>
        <h1>üè¨ Stockslight <span class="badge">Ultimate</span></h1>
        <div class="actions" aria-label="–î–µ–π—Å—Ç–≤–∏—è">
            <button id="btnAdd" class="icon-btn primary" title="–î–æ–±–∞–≤–∏—Ç—å" aria-label="–î–æ–±–∞–≤–∏—Ç—å">
                <svg viewBox="0 0 24 24"><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2h6Z"/></svg>
            </button>
            <input id="fileImport" type="file" accept=".xlsx" style="display:none">
            <button id="btnImport" class="icon-btn" title="–ò–º–ø–æ—Ä—Ç .xlsx" aria-label="–ò–º–ø–æ—Ä—Ç .xlsx">
                <svg viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2Zm7-16-5 5h3v4h4v-4h3l-5-5Z"/></svg>
            </button>
            <button id="btnExport" class="icon-btn secondary" title="–≠–∫—Å–ø–æ—Ä—Ç .xlsx" aria-label="–≠–∫—Å–ø–æ—Ä—Ç .xlsx">
                <svg viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2ZM12 4v9l3.5-3.5 1.4 1.4L12 16l-4.9-4.9 1.4-1.4L12 13V4h0Z"/></svg>
            </button>
            <button id="btnAnalytics" class="icon-btn secondary" title="–ê–Ω–∞–ª–∏—Ç–∏–∫–∞" aria-label="–ê–Ω–∞–ª–∏—Ç–∏–∫–∞">
                <svg viewBox="0 0 24 24"><path d="M4 4v16h16v-2H6V4H4zm12 2v5h-3V6h3zm-5 4v5H8v-5h3zm5 4v4h-3v-4h3z"/></svg>
            </button>
        </div>
    </header>

    <section class="toolbar" aria-labelledby="filters">
        <h2 id="filters" style="display:none">–§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</h2>
        <div class="search-row">
            <input id="search" type="search" class="chip" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é" aria-label="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é">
            <button id="toggleFilters" class="icon-btn" title="–°–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã" aria-label="–°–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã">
                <svg viewBox="0 0 24 24" id="hideIcon"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/></svg>
                <svg viewBox="0 0 24 24" id="showIcon" style="display:none;"><path d="M12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8zm-1 14v-4h-4v-2h4V8h2v4h4v2h-4v4h-2z"/></svg>
            </button>
        </div>
        <div id="filterSelects" class="filter-selects">
            <select id="categoryFilter" title="–ö–∞—Ç–µ–≥–æ—Ä–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞)" aria-label="–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">
                <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
            </select>
            <select id="sort" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (—Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">
                <option value="order-asc"># (–ø–æ –ø–æ—Ä—è–¥–∫—É)</option>
                <option value="name-asc">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ (–ê-–Ø)</option>
                <option value="name-desc">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ (–Ø-–ê)</option>
                <option value="qty-desc">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (‚Üì)</option>
                <option value="qty-asc">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (‚Üë)</option>
                <option value="price-desc">–¶–µ–Ω–∞ (‚Üì)</option>
                <option value="price-asc">–¶–µ–Ω–∞ (‚Üë)</option>
                <option value="sum-desc">–°—É–º–º–∞ (‚Üì)</option>
                <option value="sum-asc">–°—É–º–º–∞ (‚Üë)</option>
            </select>
            <select id="pageSize" title="–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ" aria-label="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ">
                <option value="50">50</option>
                <option value="100" selected>100</option>
                <option value="200">200</option>
                <option value="-1">–í—Å–µ</option>
            </select>
        </div>
    </section>

    <main>
        <div class="table-wrap">
            <table aria-describedby="summary">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</th>
                        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                        <th class="right">–¶–µ–Ω–∞</th>
                        <th class="right">–°—É–º–º–∞</th>
                        <th class="right">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                        <th class="right">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="grid"></tbody>
            </table>
        </div>
        <div id="cards" class="cards"></div>
        <div class="summary">
            <div class="pager">
                <button id="prevPage" class="icon-btn" title="–ù–∞–∑–∞–¥" aria-label="–ù–∞–∑–∞–¥">‚ü®</button>
                <span id="pageInfo" style="min-width:80px;text-align:center;color:var(--ink2)">–°—Ç—Ä. 1/1</span>
                <button id="nextPage" class="icon-btn" title="–í–ø–µ—Ä—ë–¥" aria-label="–í–ø–µ—Ä—ë–¥">‚ü©</button>
            </div>
            <div>–ü–æ–∫–∞–∑–∞–Ω–æ: <b id="shownCount">0</b> –∏–∑ <b id="totalCount">0</b></div>
            <div class="summary-stats">
                <div>–í—Å–µ–≥–æ —à—Ç—É–∫: <b id="statQty" class="num">0</b></div>
                <div>–û–±—â–∞—è —Å—É–º–º–∞: <b id="statSum" class="num">0</b></div>
            </div>
        </div>
    </main>

    <div id="modalEdit" class="modal" role="dialog" aria-modal="true" aria-labelledby="dlgTitle" aria-describedby="editDesc">
        <div class="dialog">
            <h3 id="dlgTitle">–¢–æ–≤–∞—Ä</h3>
            <p id="editDesc" style="display:none">–§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ —Å –ø–æ–ª—è–º–∏: –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Ü–µ–Ω–∞.</p>
            <div class="field">
                <label for="fName">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
                <input id="fName" type="text" inputmode="text" class="chip" required>
            </div>
            <div class="field">
                <label for="fCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è (–¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞)</label>
                <input id="fCategory" type="text" list="catList" inputmode="text" class="chip">
                <datalist id="catList"></datalist>
            </div>
            <div class="row">
                <div class="col field">
                    <label for="fPrice">–¶–µ–Ω–∞ (UZS)</label>
                    <input id="fPrice" type="number" step="1" min="0" inputmode="numeric" class="chip" required>
                </div>
                <div class="col field">
                    <label for="fQty">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                    <input id="fQty" type="number" step="1" min="0" inputmode="numeric" class="chip" required>
                </div>
            </div>
            <div class="field">
                <label for="fSum">–°—É–º–º–∞ (UZS)</label>
                <input id="fSum" type="number" step="1" min="0" inputmode="numeric" class="chip" disabled>
            </div>
            <div class="actions">
                <button data-close class="icon-btn" title="–û—Ç–º–µ–Ω–∞" aria-label="–û—Ç–º–µ–Ω–∞">
                    <svg viewBox="0 0 24 24"><path d="M18.3 5.71 12 12.01l-6.3-6.3-1.4 1.41L10.59 13.4l-6.3 6.3 1.41 1.41 6.3-6.29 6.29 6.29 1.41-1.41-6.3-6.3 6.3-6.29-1.41-1.41Z"/></svg>
                </button>
                <button id="btnSave" class="icon-btn primary" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" aria-label="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">
                    <svg viewBox="0 0 24 24"><path d="M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41Z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <div id="modalDelete" class="modal" role="dialog" aria-modal="true" aria-labelledby="delTitle" aria-describedby="delDesc">
        <div class="dialog">
            <h3 id="delTitle">–£–¥–∞–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é?</h3>
            <p id="delDesc" style="display:none">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤.</p>
            <div class="actions">
                <button data-close class="icon-btn" title="–û—Ç–º–µ–Ω–∞" aria-label="–û—Ç–º–µ–Ω–∞">
                    <svg viewBox="0 0 24 24"><path d="M18.3 5.71 12 12.01l-6.3-6.3-1.4 1.41L10.59 13.4l-6.3 6.3 1.41 1.41 6.3-6.29 6.29 6.29 1.41-1.41-6.3-6.3 6.3-6.29-1.41-1.41Z"/></svg>
                </button>
                <button id="btnDeleteYes" class="icon-btn danger" title="–£–¥–∞–ª–∏—Ç—å" aria-label="–£–¥–∞–ª–∏—Ç—å">
                    <svg viewBox="0 0 24 24"><path d="M6 7h12l-1 14H7L6 7Zm3-3h6l1 2H8l1-2Z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <div id="modalPlus" class="modal" role="dialog" aria-modal="true" aria-labelledby="plusTitle" aria-describedby="plusDesc">
        <div class="dialog">
            <h3 id="plusTitle">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</h3>
            <p id="plusDesc" style="display:none">–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞.</p>
            <div class="field">
                <label for="fAdd">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ)</label>
                <input id="fAdd" type="number" step="1" inputmode="numeric" class="chip" required>
            </div>
            <div class="actions">
                <button data-close class="icon-btn" title="–û—Ç–º–µ–Ω–∞" aria-label="–û—Ç–º–µ–Ω–∞">
                    <svg viewBox="0 0 24 24"><path d="M18.3 5.71 12 12.01l-6.3-6.3-1.4 1.41L10.59 13.4l-6.3 6.3 1.41 1.41 6.3-6.29 6.29 6.29 1.41-1.41-6.3-6.3 6.3-6.29-1.41-1.41Z"/></svg>
                </button>
                <button id="btnPlus" class="icon-btn primary" title="–î–æ–±–∞–≤–∏—Ç—å" aria-label="–î–æ–ø–æ–ª–Ω–∏—Ç—å">
                    <svg viewBox="0 0 24 24"><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2h6Z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <div id="analyticsModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="analyticsTitle" aria-describedby="analyticsDesc">
        <div class="dialog">
            <h3 id="analyticsTitle">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
            <p id="analyticsDesc" style="display:none">–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ —Ç–∞–±–ª–∏—Ü–µ–π.</p>
            <div id="analyticsTabs"></div>
            <div id="chartContainer">
                <canvas id="barChart" width="300" height="200"></canvas>
                <canvas id="pieChart" width="200" height="200"></canvas>
            </div>
            <div id="analyticsTable">
                <table>
                    <thead><tr><th>–¢–æ–≤–∞—Ä</th><th>–°—É–º–º–∞</th></tr></thead>
                    <tbody id="topItems"></tbody>
                </table>
            </div>
            <div class="actions">
                <button id="closeAnalytics" class="icon-btn" title="–ó–∞–∫—Ä—ã—Ç—å" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
                    <svg viewBox="0 0 24 24"><path d="M18.3 5.71 12 12.01l-6.3-6.3-1.4 1.41L10.59 13.4l-6.3 6.3 1.41 1.41 6.3-6.29 6.29 6.29 1.41-1.41-6.3-6.3 6.3-6.29-1.41-1.41Z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <footer>¬© 2025 Stockslight. Ultimate: —Ç—ë–º–Ω–æ-—Å–∏–Ω–∏–π cascade-–¥–∏–∑–∞–π–Ω, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª –≤ ‚ûï.</footer>

   
